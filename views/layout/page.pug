-
    const itemClass = (baseClass, ...itemClasses) => [baseClass, ...itemClasses].filter((c) => !!c).join('__');
    const baseWithVariants = (base, ...variants) => {
        return [
            base, 
            ...variants
                .filter((v) => !!v)
                .map((v) => `${base}--${v}`)
        ];
    };
    const itemWithVariants = (base, item, ...variants) => 
        baseWithVariants(itemClass(base, item), ...variants);

    const navClass = 'nav';
    const navItemClass = itemClass(navClass, 'item');


mixin navlink(href, title, ...variants)
    -
        let classes = baseWithVariants(navItemClass, ...variants, url === href ? 'active' : null);
    a(href=href, class=classes)= title

mixin navigation
    nav(class=navClass)
        +navlink('/', 'Home')
        if locals.user
            +navlink('/user', locals.user.nickname)
            +navlink('/auth/logout', 'Log out', 'warning', 'last')
        else
            +navlink('/auth/login', 'Log in', 'last')

doctype html
html(lang='en')
    head
        meta(charset='utf-8')
        meta(http-equiv='X-UA-Compatible', content='IE=edge')
        meta(name='viewport', content='width=device-width, initial-scale=1')
        meta(name='theme-color', content='#00838F')

        if subtitle
            title #{title}: #{subtitle}
        else
            title #{title}
        block head
    body
        header
            section.d-flex
                h1 #{title}
                +navigation
        main
            section
                block content

        footer
            section.d-flex
                p Copyright &copy; 2020
                    a(href='//kalle.surf', target='_blank')  Kalle R&auml;is&auml;nen.
                +navigation

        link(rel='stylesheet', href='/css/style.css')

        // Start CDN
        script(src='//unpkg.com/unfetch/polyfill')
        link(rel='stylesheet', href='//fonts.googleapis.com/css?family=Lexend+Deca|Staatliches&display=swap')
        link(rel='stylesheet', href='//fonts.googleapis.com/icon?family=Material+Icons')
        // end CDN

        block scripts
